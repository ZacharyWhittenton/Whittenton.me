<header class="bg-white shadow-sm sticky top-0 z-50">
  <nav class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex justify-between items-center h-16">
      <!-- Logo -->
      <div class="flex-shrink-0">
        <a routerLink="/" class="text-3xl font-script text-gray-900 hover:text-lemonade-pink transition-colors leading-tight">
          <span class="block">AFL-CIOLocal 299</span>
          <span class="block text-base">Austin, Texas</span>
        </a>
      </div>

      <!-- Desktop Navigation -->
      <div class="hidden md:block">
        <div class="ml-10 flex items-baseline space-x-8">
          <!-- About -->
          <a routerLink="/about"
             routerLinkActive="text-lemonade-pink"
             class="text-gray-700 hover:text-lemonade-pink px-3 py-2 text-sm font-medium transition-colors">
            About
          </a>

          <!-- Blog (visible to everyone) -->
          <a routerLink="/blog"
             routerLinkActive="text-lemonade-pink"
             [routerLinkActiveOptions]="{ exact: false }"
             class="text-gray-700 hover:text-lemonade-pink px-3 py-2 text-sm font-medium transition-colors">
            Blog
          </a>

          <!-- Contact -->
          <a routerLink="/contact"
             routerLinkActive="text-lemonade-pink"
             class="text-gray-700 hover:text-lemonade-pink px-3 py-2 text-sm font-medium transition-colors">
            Contact
          </a>

          <!-- Scheduler (only when logged in as Admin/Member) -->
          <a *ngIf="auth.isLoggedIn && auth.hasAnyRole(['Admin','Member'])"
             routerLink="/scheduler"
             routerLinkActive="text-lemonade-pink"
             class="text-gray-700 hover:text-lemonade-pink px-3 py-2 text-sm font-medium transition-colors">
            Scheduler
          </a>

          <!-- Logged-in: My Account -->
          <a *ngIf="auth.isLoggedIn"
             routerLink="/account"
             routerLinkActive="text-lemonade-pink"
             class="text-gray-700 hover:text-lemonade-pink px-3 py-2 text-sm font-medium transition-colors">
            My Account
          </a>

          <!-- Admin-only -->
          <a *ngIf="auth.isAdmin()"
             routerLink="/admin"
             routerLinkActive="text-lemonade-pink"
             class="text-gray-700 hover:text-lemonade-pink px-3 py-2 text-sm font-medium transition-colors">
            Admin
          </a>
        </div>
      </div>

      <!-- Auth actions (desktop) -->
      <div class="hidden md:block">
        <!-- Guest -->
        <ng-container *ngIf="!auth.isLoggedIn; else loggedInActions">
          <a routerLink="/auth/login"
             class="text-gray-700 hover:text-lemonade-pink px-3 py-2 text-sm font-medium transition-colors">
            Login
          </a>
          <a routerLink="/auth/register"
             class="text-gray-700 hover:text-lemonade-pink px-3 py-2 text-sm font-medium transition-colors">
            Register
          </a>
        </ng-container>
        <!-- Logged in -->
        <ng-template #loggedInActions>
          <button type="button"
                  (click)="logout()"
                  class="text-gray-700 hover:text-lemonade-pink px-3 py-2 text-sm font-medium transition-colors">
            Logout
          </button>
        </ng-template>
      </div>

      <!-- Mobile menu button -->
      <div class="md:hidden">
        <button (click)="toggleMobileMenu()"
                class="bg-gray-50 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-lemonade-pink">
          <svg class="h-6 w-6" [class.hidden]="isMobileMenuOpen" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"/>
          </svg>
          <svg class="h-6 w-6" [class.hidden]="!isMobileMenuOpen" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"/>
          </svg>
        </button>
      </div>
    </div>

    <!-- Mobile menu (mirrors desktop order: About -> Blog -> Contact) -->
    <div class="md:hidden" [class.hidden]="!isMobileMenuOpen">
      <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3 bg-white border-t">
        <!-- About -->
        <a routerLink="/about"
           routerLinkActive="text-lemonade-pink"
           (click)="closeMobileMenu()"
           class="text-gray-700 hover:text-lemonade-pink block px-3 py-2 text-base font-medium">
          About
        </a>

        <!-- Blog -->
        <a routerLink="/blog"
           routerLinkActive="text-lemonade-pink"
           [routerLinkActiveOptions]="{ exact: false }"
           (click)="closeMobileMenu()"
           class="text-gray-700 hover:text-lemonade-pink block px-3 py-2 text-base font-medium">
          Blog
        </a>

        <!-- Contact -->
        <a routerLink="/contact"
           routerLinkActive="text-lemonade-pink"
           (click)="closeMobileMenu()"
           class="text-gray-700 hover:text-lemonade-pink block px-3 py-2 text-base font-medium">
          Contact
        </a>

        <!-- Scheduler (only Admin/Member) -->
        <a *ngIf="auth.isLoggedIn && auth.hasAnyRole(['Admin','Member'])"
           routerLink="/scheduler"
           routerLinkActive="text-lemonade-pink"
           (click)="closeMobileMenu()"
           class="text-gray-700 hover:text-lemonade-pink block px-3 py-2 text-base font-medium">
          Scheduler
        </a>

        <!-- My Account (logged in) -->
        <a *ngIf="auth.isLoggedIn"
           routerLink="/account"
           routerLinkActive="text-lemonade-pink"
           (click)="closeMobileMenu()"
           class="text-gray-700 hover:text-lemonade-pink block px-3 py-2 text-base font-medium">
          My Account
        </a>

        <!-- Admin -->
        <a *ngIf="auth.isAdmin()"
           routerLink="/admin"
           routerLinkActive="text-lemonade-pink"
           (click)="closeMobileMenu()"
           class="text-gray-700 hover:text-lemonade-pink block px-3 py-2 text-base font-medium">
          Admin
        </a>

        <!-- Auth actions -->
        <ng-container *ngIf="!auth.isLoggedIn; else mobileLoggedIn">
          <a routerLink="/auth/login"
             (click)="closeMobileMenu()"
             class="text-gray-700 hover:text-lemonade-pink block px-3 py-2 text-base font-medium">
            Login
          </a>
          <a routerLink="/auth/register"
             (click)="closeMobileMenu()"
             class="text-gray-700 hover:text-lemonade-pink block px-3 py-2 text-base font-medium">
            Register
          </a>
        </ng-container>
        <ng-template #mobileLoggedIn>
          <button type="button"
                  (click)="logout()"
                  class="text-left w-full text-gray-700 hover:text-lemonade-pink block px-3 py-2 text-base font-medium">
            Logout
          </button>
        </ng-template>
      </div>
    </div>
  </nav>
</header>
