{"ast":null,"code":"import { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../core/services/auth.service\";\nimport * as i3 from \"@angular/router\";\nimport * as i4 from \"@angular/common\";\nfunction AccountComponent_div_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" Name is required (min 2 chars). \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccountComponent_div_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtext(1, \" Enter a valid email. \");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction AccountComponent_div_23_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 14);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.error, \" \");\n  }\n}\nfunction AccountComponent_div_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 15);\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance();\n    i0.ɵɵtextInterpolate1(\" \", ctx_r0.success, \" \");\n  }\n}\nexport class AccountComponent {\n  constructor(fb, auth, router) {\n    this.fb = fb;\n    this.auth = auth;\n    this.router = router;\n    this.loading = false;\n    this.error = '';\n    this.success = '';\n    this.form = this.fb.group({\n      name: ['', [Validators.required, Validators.minLength(2)]],\n      email: ['', [Validators.required, Validators.email]],\n      dob: [''],\n      phone: ['']\n    });\n  }\n  ngOnInit() {\n    const u = this.auth.user;\n    if (u) {\n      this.form.patchValue({\n        name: u.name ?? '',\n        email: u.email ?? '',\n        dob: u.dob ?? '',\n        phone: u.phone ?? ''\n      });\n    }\n  }\n  save() {\n    this.error = '';\n    this.success = '';\n    if (this.form.invalid) {\n      this.form.markAllAsTouched();\n      return;\n    }\n    this.loading = true;\n    const v = this.form.getRawValue();\n    const res = this.auth.updateProfile({\n      name: v.name.trim(),\n      email: v.email.trim(),\n      dob: v.dob || null,\n      phone: v.phone || null\n    });\n    this.loading = false;\n    if (!res.ok) {\n      this.error = res.error || 'Failed to update profile.';\n      return;\n    }\n    this.success = 'Profile saved.';\n  }\n  static {\n    this.ɵfac = function AccountComponent_Factory(t) {\n      return new (t || AccountComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.Router));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: AccountComponent,\n      selectors: [[\"app-account\"]],\n      decls: 27,\n      vars: 7,\n      consts: [[1, \"mx-auto\", \"max-w-xl\", \"p-6\"], [1, \"text-2xl\", \"font-semibold\", \"mb-4\"], [\"novalidate\", \"\", 1, \"space-y-4\", 3, \"ngSubmit\", \"formGroup\"], [1, \"block\", \"text-sm\", \"font-medium\", \"mb-1\"], [\"type\", \"text\", \"formControlName\", \"name\", 1, \"w-full\", \"border\", \"rounded-lg\", \"px-3\", \"py-2\"], [\"class\", \"text-sm text-red-600\", 4, \"ngIf\"], [\"type\", \"email\", \"formControlName\", \"email\", 1, \"w-full\", \"border\", \"rounded-lg\", \"px-3\", \"py-2\"], [1, \"grid\", \"sm:grid-cols-2\", \"gap-4\"], [\"type\", \"date\", \"formControlName\", \"dob\", 1, \"w-full\", \"border\", \"rounded-lg\", \"px-3\", \"py-2\"], [\"type\", \"tel\", \"formControlName\", \"phone\", \"placeholder\", \"555-123-4567\", 1, \"w-full\", \"border\", \"rounded-lg\", \"px-3\", \"py-2\"], [\"class\", \"rounded-md border border-red-200 bg-red-50 p-3 text-red-700\", 4, \"ngIf\"], [\"class\", \"rounded-md border border-green-200 bg-green-50 p-3 text-green-800\", 4, \"ngIf\"], [\"type\", \"submit\", 1, \"rounded-lg\", \"bg-black\", \"text-white\", \"px-4\", \"py-2\", 3, \"disabled\"], [1, \"text-sm\", \"text-red-600\"], [1, \"rounded-md\", \"border\", \"border-red-200\", \"bg-red-50\", \"p-3\", \"text-red-700\"], [1, \"rounded-md\", \"border\", \"border-green-200\", \"bg-green-50\", \"p-3\", \"text-green-800\"]],\n      template: function AccountComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0)(1, \"h1\", 1);\n          i0.ɵɵtext(2, \"My Account\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(3, \"form\", 2);\n          i0.ɵɵlistener(\"ngSubmit\", function AccountComponent_Template_form_ngSubmit_3_listener() {\n            return ctx.save();\n          });\n          i0.ɵɵelementStart(4, \"div\")(5, \"label\", 3);\n          i0.ɵɵtext(6, \"Name\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(7, \"input\", 4);\n          i0.ɵɵtemplate(8, AccountComponent_div_8_Template, 2, 0, \"div\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(9, \"div\")(10, \"label\", 3);\n          i0.ɵɵtext(11, \"Email\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(12, \"input\", 6);\n          i0.ɵɵtemplate(13, AccountComponent_div_13_Template, 2, 0, \"div\", 5);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(14, \"div\", 7)(15, \"div\")(16, \"label\", 3);\n          i0.ɵɵtext(17, \"Date of Birth\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(18, \"input\", 8);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(19, \"div\")(20, \"label\", 3);\n          i0.ɵɵtext(21, \"Phone Number\");\n          i0.ɵɵelementEnd();\n          i0.ɵɵelement(22, \"input\", 9);\n          i0.ɵɵelementEnd()();\n          i0.ɵɵtemplate(23, AccountComponent_div_23_Template, 2, 1, \"div\", 10)(24, AccountComponent_div_24_Template, 2, 1, \"div\", 11);\n          i0.ɵɵelementStart(25, \"button\", 12);\n          i0.ɵɵtext(26);\n          i0.ɵɵelementEnd()()();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(3);\n          i0.ɵɵproperty(\"formGroup\", ctx.form);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.form.controls.name.touched && ctx.form.controls.name.invalid);\n          i0.ɵɵadvance(5);\n          i0.ɵɵproperty(\"ngIf\", ctx.form.controls.email.touched && ctx.form.controls.email.invalid);\n          i0.ɵɵadvance(10);\n          i0.ɵɵproperty(\"ngIf\", ctx.error);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"ngIf\", ctx.success);\n          i0.ɵɵadvance();\n          i0.ɵɵproperty(\"disabled\", ctx.loading);\n          i0.ɵɵadvance();\n          i0.ɵɵtextInterpolate1(\" \", ctx.loading ? \"Saving\\u2026\" : \"Save changes\", \" \");\n        }\n      },\n      dependencies: [i4.NgIf, i1.ɵNgNoValidate, i1.DefaultValueAccessor, i1.NgControlStatus, i1.NgControlStatusGroup, i1.FormGroupDirective, i1.FormControlName],\n      styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJhY2NvdW50LmNvbXBvbmVudC5jc3MifQ== */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvYWNjb3VudC9hY2NvdW50LmNvbXBvbmVudC5jc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUNBLG9LQUFvSyIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n    });\n  }\n}","map":{"version":3,"names":["Validators","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","ctx_r0","error","success","AccountComponent","constructor","fb","auth","router","loading","form","group","name","required","minLength","email","dob","phone","ngOnInit","u","user","patchValue","save","invalid","markAllAsTouched","v","getRawValue","res","updateProfile","trim","ok","ɵɵdirectiveInject","i1","FormBuilder","i2","AuthService","i3","Router","selectors","decls","vars","consts","template","AccountComponent_Template","rf","ctx","ɵɵlistener","AccountComponent_Template_form_ngSubmit_3_listener","ɵɵelement","ɵɵtemplate","AccountComponent_div_8_Template","AccountComponent_div_13_Template","AccountComponent_div_23_Template","AccountComponent_div_24_Template","ɵɵproperty","controls","touched"],"sources":["/Users/zaq/Documents/GitHub/Angular-APWU/src/app/features/account/account.component.ts","/Users/zaq/Documents/GitHub/Angular-APWU/src/app/features/account/account.component.html"],"sourcesContent":["import { Component, OnInit } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { AuthService } from '../../core/services/auth.service';\nimport { Router } from '@angular/router';\n\n@Component({\n  selector: 'app-account',\n  templateUrl: './account.component.html',\n  styleUrls: ['./account.component.css'],\n})\nexport class AccountComponent implements OnInit {\n  loading = false;\n  error = '';\n  success = '';\n\n  form = this.fb.group({\n    name: ['', [Validators.required, Validators.minLength(2)]],\n    email: ['', [Validators.required, Validators.email]],\n    dob: [''],   // yyyy-mm-dd\n    phone: [''],\n  });\n\n  constructor(private fb: FormBuilder, private auth: AuthService, private router: Router) {}\n\n  ngOnInit(): void {\n    const u = this.auth.user;\n    if (u) {\n      this.form.patchValue({\n        name: u.name ?? '',\n        email: u.email ?? '',\n        dob: u.dob ?? '',\n        phone: u.phone ?? '',\n      });\n    }\n  }\n\n  save() {\n    this.error = '';\n    this.success = '';\n    if (this.form.invalid) {\n      this.form.markAllAsTouched();\n      return;\n    }\n    this.loading = true;\n    const v = this.form.getRawValue();\n    const res = this.auth.updateProfile({\n      name: v.name!.trim(),\n      email: v.email!.trim(),\n      dob: v.dob || null,\n      phone: v.phone || null,\n    });\n    this.loading = false;\n    if (!res.ok) {\n      this.error = res.error || 'Failed to update profile.';\n      return;\n    }\n    this.success = 'Profile saved.';\n  }\n}\n","<div class=\"mx-auto max-w-xl p-6\">\n    <h1 class=\"text-2xl font-semibold mb-4\">My Account</h1>\n  \n    <form [formGroup]=\"form\" (ngSubmit)=\"save()\" class=\"space-y-4\" novalidate>\n      <div>\n        <label class=\"block text-sm font-medium mb-1\">Name</label>\n        <input type=\"text\" class=\"w-full border rounded-lg px-3 py-2\" formControlName=\"name\" />\n        <div class=\"text-sm text-red-600\" *ngIf=\"form.controls.name.touched && form.controls.name.invalid\">\n          Name is required (min 2 chars).\n        </div>\n      </div>\n  \n      <div>\n        <label class=\"block text-sm font-medium mb-1\">Email</label>\n        <input type=\"email\" class=\"w-full border rounded-lg px-3 py-2\" formControlName=\"email\" />\n        <div class=\"text-sm text-red-600\" *ngIf=\"form.controls.email.touched && form.controls.email.invalid\">\n          Enter a valid email.\n        </div>\n      </div>\n  \n      <div class=\"grid sm:grid-cols-2 gap-4\">\n        <div>\n          <label class=\"block text-sm font-medium mb-1\">Date of Birth</label>\n          <input type=\"date\" class=\"w-full border rounded-lg px-3 py-2\" formControlName=\"dob\" />\n        </div>\n        <div>\n          <label class=\"block text-sm font-medium mb-1\">Phone Number</label>\n          <input type=\"tel\" class=\"w-full border rounded-lg px-3 py-2\" formControlName=\"phone\" placeholder=\"555-123-4567\" />\n        </div>\n      </div>\n  \n      <div *ngIf=\"error\" class=\"rounded-md border border-red-200 bg-red-50 p-3 text-red-700\">\n        {{ error }}\n      </div>\n      <div *ngIf=\"success\" class=\"rounded-md border border-green-200 bg-green-50 p-3 text-green-800\">\n        {{ success }}\n      </div>\n  \n      <button type=\"submit\" class=\"rounded-lg bg-black text-white px-4 py-2\" [disabled]=\"loading\">\n        {{ loading ? 'Saving…' : 'Save changes' }}\n      </button>\n    </form>\n  </div>\n  "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}