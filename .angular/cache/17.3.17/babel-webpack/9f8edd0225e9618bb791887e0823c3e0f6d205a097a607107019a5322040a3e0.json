{"ast":null,"code":"import { EventEmitter } from '@angular/core';\nimport { Validators } from '@angular/forms';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/forms\";\nimport * as i2 from \"../../../../core/services/auth.service\";\nimport * as i3 from \"../../services/scheduler.service\";\nexport class MeetingFormComponent {\n  constructor(fb, auth, scheduler) {\n    this.fb = fb;\n    this.auth = auth;\n    this.scheduler = scheduler;\n    this.created = new EventEmitter();\n    this.updated = new EventEmitter();\n    this.me = null;\n    this.users = [];\n    this.error = '';\n    this.success = '';\n    this.form = this.fb.group({\n      id: [''],\n      title: ['', [Validators.required, Validators.minLength(3)]],\n      description: [''],\n      date: ['', Validators.required],\n      startTime: ['', Validators.required],\n      endTime: ['', Validators.required],\n      location: [''],\n      onlineLink: [''],\n      participants: [[]] // emails\n    });\n  }\n  ngOnInit() {\n    this.auth.user$.subscribe(u => {\n      this.me = u;\n      this.users = this.auth.listUsers();\n      // include me by default\n      if (u && this.form.controls.participants.value.length === 0) {\n        this.form.controls.participants.setValue([u.email]);\n      }\n    });\n  }\n  submit() {\n    this.error = '';\n    this.success = '';\n    if (!this.me) {\n      this.error = 'Not authenticated.';\n      return;\n    }\n    if (this.form.invalid) {\n      this.form.markAllAsTouched();\n      return;\n    }\n    const v = this.form.getRawValue();\n    const start = isoFrom(v.date, v.startTime);\n    const end = isoFrom(v.date, v.endTime);\n    const payload = {\n      title: v.title.trim(),\n      description: v.description?.trim() || '',\n      start,\n      end,\n      location: v.location?.trim() || null,\n      onlineLink: v.onlineLink?.trim() || null,\n      participants: v.participants.length ? v.participants : [this.me.email],\n      createdBy: this.me.email\n    };\n    const res = this.scheduler.create(payload);\n    if (!res.ok) {\n      this.error = res.error || 'Failed to create meeting.';\n      return;\n    }\n    this.success = 'Meeting scheduled.';\n    this.form.reset({\n      participants: [this.me.email]\n    });\n    this.created.emit();\n  }\n  static {\n    this.ɵfac = function MeetingFormComponent_Factory(t) {\n      return new (t || MeetingFormComponent)(i0.ɵɵdirectiveInject(i1.FormBuilder), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.SchedulerService));\n    };\n  }\n  static {\n    this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: MeetingFormComponent,\n      selectors: [[\"app-meeting-form\"]],\n      outputs: {\n        created: \"created\",\n        updated: \"updated\"\n      },\n      decls: 2,\n      vars: 0,\n      template: function MeetingFormComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"p\");\n          i0.ɵɵtext(1, \"meeting-form works!\");\n          i0.ɵɵelementEnd();\n        }\n      },\n      styles: [\"/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsImZpbGUiOiJtZWV0aW5nLWZvcm0uY29tcG9uZW50LmNzcyJ9 */\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8uL3NyYy9hcHAvZmVhdHVyZXMvc2NoZWR1bGVyL2NvbXBvbmVudHMvbWVldGluZy1mb3JtL21lZXRpbmctZm9ybS5jb21wb25lbnQuY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7QUFDQSx3S0FBd0siLCJzb3VyY2VSb290IjoiIn0= */\"]\n    });\n  }\n}\n/* helpers */\nfunction isoFrom(date, time) {\n  const [h, m] = time.split(':').map(Number);\n  const d = new Date(date);\n  d.setHours(h, m, 0, 0);\n  const yyyy = d.getFullYear();\n  const mm = String(d.getMonth() + 1).padStart(2, '0');\n  const dd = String(d.getDate()).padStart(2, '0');\n  const hh = String(d.getHours()).padStart(2, '0');\n  const mi = String(d.getMinutes()).padStart(2, '0');\n  return `${yyyy}-${mm}-${dd}T${hh}:${mi}:00`;\n}","map":{"version":3,"names":["EventEmitter","Validators","MeetingFormComponent","constructor","fb","auth","scheduler","created","updated","me","users","error","success","form","group","id","title","required","minLength","description","date","startTime","endTime","location","onlineLink","participants","ngOnInit","user$","subscribe","u","listUsers","controls","value","length","setValue","email","submit","invalid","markAllAsTouched","v","getRawValue","start","isoFrom","end","payload","trim","createdBy","res","create","ok","reset","emit","i0","ɵɵdirectiveInject","i1","FormBuilder","i2","AuthService","i3","SchedulerService","selectors","outputs","decls","vars","template","MeetingFormComponent_Template","rf","ctx","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","time","h","m","split","map","Number","d","Date","setHours","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","hh","getHours","mi","getMinutes"],"sources":["/Users/zaq/Documents/GitHub/Angular-APWU/src/app/features/scheduler/components/meeting-form/meeting-form.component.ts","/Users/zaq/Documents/GitHub/Angular-APWU/src/app/features/scheduler/components/meeting-form/meeting-form.component.html"],"sourcesContent":["import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { AuthService, User } from '../../../../core/services/auth.service';\nimport { SchedulerService } from '../../services/scheduler.service';\n\n@Component({\n  selector: 'app-meeting-form',\n  templateUrl: './meeting-form.component.html',\n  styleUrls: ['./meeting-form.component.css'],\n})\nexport class MeetingFormComponent implements OnInit {\n  @Output() created = new EventEmitter<void>();\n  @Output() updated = new EventEmitter<void>();\n\n  me: User | null = null;\n  users: User[] = [];\n\n  error = '';\n  success = '';\n\n  form = this.fb.group({\n    id: [''],\n    title: ['', [Validators.required, Validators.minLength(3)]],\n    description: [''],\n    date: ['', Validators.required],      // yyyy-mm-dd\n    startTime: ['', Validators.required], // HH:mm\n    endTime: ['', Validators.required],   // HH:mm\n    location: [''],\n    onlineLink: [''],\n    participants: [[] as string[]],       // emails\n  });\n\n  constructor(\n    private fb: FormBuilder,\n    private auth: AuthService,\n    private scheduler: SchedulerService\n  ) {}\n\n  ngOnInit(): void {\n    this.auth.user$.subscribe(u => {\n      this.me = u;\n      this.users = this.auth.listUsers();\n      // include me by default\n      if (u && (this.form.controls.participants.value as string[]).length === 0) {\n        this.form.controls.participants.setValue([u.email]);\n      }\n    });\n  }\n\n  submit() {\n    this.error = '';\n    this.success = '';\n    if (!this.me) { this.error = 'Not authenticated.'; return; }\n    if (this.form.invalid) { this.form.markAllAsTouched(); return; }\n\n    const v = this.form.getRawValue();\n    const start = isoFrom(v.date!, v.startTime!);\n    const end   = isoFrom(v.date!, v.endTime!);\n    const payload = {\n      title: v.title!.trim(),\n      description: v.description?.trim() || '',\n      start, end,\n      location: v.location?.trim() || null,\n      onlineLink: v.onlineLink?.trim() || null,\n      participants: (v.participants as string[]).length ? (v.participants as string[]) : [this.me.email],\n      createdBy: this.me.email,\n    };\n\n    const res = this.scheduler.create(payload);\n    if (!res.ok) { this.error = res.error || 'Failed to create meeting.'; return; }\n    this.success = 'Meeting scheduled.';\n    this.form.reset({ participants: [this.me.email] });\n    this.created.emit();\n  }\n}\n\n/* helpers */\nfunction isoFrom(date: string, time: string): string {\n  const [h, m] = time.split(':').map(Number);\n  const d = new Date(date);\n  d.setHours(h, m, 0, 0);\n  const yyyy = d.getFullYear();\n  const mm = String(d.getMonth() + 1).padStart(2, '0');\n  const dd = String(d.getDate()).padStart(2, '0');\n  const hh = String(d.getHours()).padStart(2, '0');\n  const mi = String(d.getMinutes()).padStart(2, '0');\n  return `${yyyy}-${mm}-${dd}T${hh}:${mi}:00`;\n}\n","<p>meeting-form works!</p>\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}