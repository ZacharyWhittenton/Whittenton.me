{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Output } from '@angular/core';\nimport { Validators } from '@angular/forms';\nlet MeetingFormComponent = class MeetingFormComponent {\n  constructor(fb, auth, scheduler) {\n    this.fb = fb;\n    this.auth = auth;\n    this.scheduler = scheduler;\n    this.created = new EventEmitter();\n    this.updated = new EventEmitter();\n    this.me = null;\n    this.users = [];\n    this.error = '';\n    this.success = '';\n    this.form = this.fb.group({\n      id: [''],\n      title: ['', [Validators.required, Validators.minLength(3)]],\n      description: [''],\n      date: ['', Validators.required],\n      startTime: ['', Validators.required],\n      endTime: ['', Validators.required],\n      location: [''],\n      onlineLink: [''],\n      participants: [[]] // emails\n    });\n  }\n  ngOnInit() {\n    this.auth.user$.subscribe(u => {\n      this.me = u;\n      this.users = this.auth.listUsers();\n      // include me by default\n      if (u && this.participantsValue().length === 0) {\n        this.form.controls.participants.setValue([u.email]);\n      }\n    });\n  }\n  // ----- helpers for participants control -----\n  participantsValue() {\n    return this.form.controls.participants.value ?? [];\n  }\n  isSelected(email) {\n    return this.participantsValue().includes(email);\n  }\n  onToggleParticipant(email, event) {\n    const checked = event.target?.checked ?? false;\n    const list = [...this.participantsValue()];\n    if (checked) {\n      if (!list.includes(email)) list.push(email);\n    } else {\n      const idx = list.indexOf(email);\n      if (idx >= 0) list.splice(idx, 1);\n    }\n    this.form.controls.participants.setValue(list);\n  }\n  // -------------------------------------------\n  submit() {\n    this.error = '';\n    this.success = '';\n    if (!this.me) {\n      this.error = 'Not authenticated.';\n      return;\n    }\n    if (this.form.invalid) {\n      this.form.markAllAsTouched();\n      return;\n    }\n    const v = this.form.getRawValue();\n    const start = isoFrom(v.date, v.startTime);\n    const end = isoFrom(v.date, v.endTime);\n    const payload = {\n      title: v.title.trim(),\n      description: v.description?.trim() || '',\n      start,\n      end,\n      location: v.location?.trim() || null,\n      onlineLink: v.onlineLink?.trim() || null,\n      participants: this.participantsValue().length ? this.participantsValue() : [this.me.email],\n      createdBy: this.me.email\n    };\n    const res = this.scheduler.create(payload);\n    if (!res.ok) {\n      this.error = res.error || 'Failed to create meeting.';\n      return;\n    }\n    this.success = 'Meeting scheduled.';\n    this.form.reset({\n      participants: [this.me.email]\n    });\n    this.created.emit();\n  }\n};\n__decorate([Output()], MeetingFormComponent.prototype, \"created\", void 0);\n__decorate([Output()], MeetingFormComponent.prototype, \"updated\", void 0);\nMeetingFormComponent = __decorate([Component({\n  selector: 'app-meeting-form',\n  templateUrl: './meeting-form.component.html',\n  styleUrls: ['./meeting-form.component.css']\n})], MeetingFormComponent);\nexport { MeetingFormComponent };\n/* helpers */\nfunction isoFrom(date, time) {\n  const [h, m] = time.split(':').map(Number);\n  const d = new Date(date);\n  d.setHours(h, m, 0, 0);\n  const yyyy = d.getFullYear();\n  const mm = String(d.getMonth() + 1).padStart(2, '0');\n  const dd = String(d.getDate()).padStart(2, '0');\n  const hh = String(d.getHours()).padStart(2, '0');\n  const mi = String(d.getMinutes()).padStart(2, '0');\n  return `${yyyy}-${mm}-${dd}T${hh}:${mi}:00`;\n}","map":{"version":3,"names":["Component","EventEmitter","Output","Validators","MeetingFormComponent","constructor","fb","auth","scheduler","created","updated","me","users","error","success","form","group","id","title","required","minLength","description","date","startTime","endTime","location","onlineLink","participants","ngOnInit","user$","subscribe","u","listUsers","participantsValue","length","controls","setValue","email","value","isSelected","includes","onToggleParticipant","event","checked","target","list","push","idx","indexOf","splice","submit","invalid","markAllAsTouched","v","getRawValue","start","isoFrom","end","payload","trim","createdBy","res","create","ok","reset","emit","__decorate","selector","templateUrl","styleUrls","time","h","m","split","map","Number","d","Date","setHours","yyyy","getFullYear","mm","String","getMonth","padStart","dd","getDate","hh","getHours","mi","getMinutes"],"sources":["/Users/zaq/Documents/GitHub/Angular-APWU/src/app/features/scheduler/components/meeting-form/meeting-form.component.ts"],"sourcesContent":["import { Component, EventEmitter, OnInit, Output } from '@angular/core';\nimport { FormBuilder, Validators } from '@angular/forms';\nimport { AuthService, User } from '../../../../core/services/auth.service';\nimport { SchedulerService } from '../../services/scheduler.service';\n\n@Component({\n  selector: 'app-meeting-form',\n  templateUrl: './meeting-form.component.html',\n  styleUrls: ['./meeting-form.component.css'],\n})\nexport class MeetingFormComponent implements OnInit {\n  @Output() created = new EventEmitter<void>();\n  @Output() updated = new EventEmitter<void>();\n\n  me: User | null = null;\n  users: User[] = [];\n\n  error = '';\n  success = '';\n\n  form = this.fb.group({\n    id: [''],\n    title: ['', [Validators.required, Validators.minLength(3)]],\n    description: [''],\n    date: ['', Validators.required],      // yyyy-mm-dd\n    startTime: ['', Validators.required], // HH:mm\n    endTime: ['', Validators.required],   // HH:mm\n    location: [''],\n    onlineLink: [''],\n    participants: [[] as string[]],       // emails\n  });\n\n  constructor(\n    private fb: FormBuilder,\n    private auth: AuthService,\n    private scheduler: SchedulerService\n  ) {}\n\n  ngOnInit(): void {\n    this.auth.user$.subscribe(u => {\n      this.me = u;\n      this.users = this.auth.listUsers();\n      // include me by default\n      if (u && (this.participantsValue().length === 0)) {\n        this.form.controls.participants.setValue([u.email]);\n      }\n    });\n  }\n\n  // ----- helpers for participants control -----\n  participantsValue(): string[] {\n    return (this.form.controls.participants.value as string[]) ?? [];\n  }\n\n  isSelected(email: string): boolean {\n    return this.participantsValue().includes(email);\n  }\n\n  onToggleParticipant(email: string, event: Event) {\n    const checked = (event.target as HTMLInputElement)?.checked ?? false;\n    const list = [...this.participantsValue()];\n\n    if (checked) {\n      if (!list.includes(email)) list.push(email);\n    } else {\n      const idx = list.indexOf(email);\n      if (idx >= 0) list.splice(idx, 1);\n    }\n\n    this.form.controls.participants.setValue(list);\n  }\n  // -------------------------------------------\n\n  submit() {\n    this.error = '';\n    this.success = '';\n    if (!this.me) { this.error = 'Not authenticated.'; return; }\n    if (this.form.invalid) { this.form.markAllAsTouched(); return; }\n\n    const v = this.form.getRawValue();\n    const start = isoFrom(v.date!, v.startTime!);\n    const end   = isoFrom(v.date!, v.endTime!);\n    const payload = {\n      title: v.title!.trim(),\n      description: v.description?.trim() || '',\n      start, end,\n      location: v.location?.trim() || null,\n      onlineLink: v.onlineLink?.trim() || null,\n      participants: this.participantsValue().length ? this.participantsValue() : [this.me.email],\n      createdBy: this.me.email,\n    };\n\n    const res = this.scheduler.create(payload);\n    if (!res.ok) { this.error = res.error || 'Failed to create meeting.'; return; }\n    this.success = 'Meeting scheduled.';\n    this.form.reset({ participants: [this.me.email] });\n    this.created.emit();\n  }\n}\n\n/* helpers */\nfunction isoFrom(date: string, time: string): string {\n  const [h, m] = time.split(':').map(Number);\n  const d = new Date(date);\n  d.setHours(h, m, 0, 0);\n  const yyyy = d.getFullYear();\n  const mm = String(d.getMonth() + 1).padStart(2, '0');\n  const dd = String(d.getDate()).padStart(2, '0');\n  const hh = String(d.getHours()).padStart(2, '0');\n  const mi = String(d.getMinutes()).padStart(2, '0');\n  return `${yyyy}-${mm}-${dd}T${hh}:${mi}:00`;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}