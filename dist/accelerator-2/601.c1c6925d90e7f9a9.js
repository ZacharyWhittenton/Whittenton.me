"use strict";(self.webpackChunkaccelerator_2=self.webpackChunkaccelerator_2||[]).push([[601],{8601:(N,g,a)=>{a.r(g),a.d(g,{BlogModule:()=>D});var p=a(177),s=a(4341),c=a(7046),t=a(4438);let b=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-blog"]],decls:1,vars:0,template:function(o,n){1&o&&t.nrm(0,"router-outlet")},dependencies:[c.n3]})}}return i})();var d=a(9629),_=a(8010);function x(i,r){if(1&i){const e=t.RV6();t.j41(0,"button",10),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.newPost())}),t.EFF(1," New Post "),t.k0s()}}function v(i,r){1&i&&(t.j41(0,"div",11),t.EFF(1,"No posts found."),t.k0s())}function k(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",19)(1,"button",20),t.bIt("click",function(n){t.eBV(e);const l=t.XpG().$implicit,u=t.XpG();return t.Njj(u.edit(l.slug,n))}),t.EFF(2,"Edit"),t.k0s(),t.j41(3,"button",20),t.bIt("click",function(n){t.eBV(e);const l=t.XpG().$implicit,u=t.XpG();return t.Njj(u.remove(l.slug,n))}),t.EFF(4,"Delete"),t.k0s()()}}function y(i,r){if(1&i){const e=t.RV6();t.j41(0,"article",12),t.bIt("click",function(){const n=t.eBV(e).$implicit,l=t.XpG();return t.Njj(l.view(n.slug))}),t.j41(1,"div",13)(2,"h2",14),t.EFF(3),t.k0s(),t.j41(4,"span",15),t.EFF(5),t.k0s()(),t.j41(6,"p",16),t.EFF(7),t.nI1(8,"date"),t.k0s(),t.j41(9,"p",17),t.EFF(10),t.k0s(),t.DNE(11,k,5,0,"div",18),t.k0s()}if(2&i){const e=r.$implicit,o=t.XpG();t.R7$(3),t.JRh(e.title),t.R7$(),t.HbH(o.statusClass(e.published)),t.R7$(),t.SpI(" ",e.published?"Published":"Draft"," "),t.R7$(2),t.JRh(t.i5U(8,7,e.publishedAt,"mediumDate")),t.R7$(3),t.JRh(e.body),t.R7$(),t.Y8G("ngIf",o.auth.isAdmin())}}let F=(()=>{class i{constructor(e,o,n){this.blog=e,this.router=o,this.auth=n,this.posts=[],this.query=""}ngOnInit(){this.refresh()}refresh(){const e=this.blog.list(),o=this.query.toLowerCase().trim();this.posts=o?e.filter(n=>(n.title+" "+(n.tags??[]).join(" ")+" "+n.body).toLowerCase().includes(o)):e}clearSearch(){this.query="",this.refresh()}newPost(){this.auth.isAdmin()&&this.router.navigate(["/blog/new"])}view(e){this.router.navigate(["/blog",e])}edit(e,o){o?.stopPropagation(),this.auth.isAdmin()&&this.router.navigate(["/blog",e,"edit"])}remove(e,o){o?.stopPropagation(),this.auth.isAdmin()&&confirm("Delete this post?")&&(this.blog.delete(e),this.refresh())}statusClass(e){return e?"bg-green-100 text-green-800":"bg-gray-200 text-gray-800"}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(d.c),t.rXU(c.Ix),t.rXU(_.u))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-blog-list"]],decls:12,vars:4,consts:[[1,"mx-auto","max-w-5xl","p-4","sm:p-6"],[1,"flex","flex-col","sm:flex-row","sm:items-center","sm:justify-between","gap-3","mb-6"],[1,"text-2xl","font-semibold"],[1,"flex","gap-2"],["type","text","placeholder","Search posts...",1,"border","rounded-lg","px-3","py-2","w-64",3,"ngModelChange","ngModel"],[1,"px-3","py-2","rounded-lg","border",3,"click"],["class","px-3 py-2 rounded-lg bg-black text-white",3,"click",4,"ngIf"],["class","text-gray-600",4,"ngIf"],[1,"grid","md:grid-cols-2","gap-4"],["class","rounded-xl border p-4 hover:shadow transition cursor-pointer",3,"click",4,"ngFor","ngForOf"],[1,"px-3","py-2","rounded-lg","bg-black","text-white",3,"click"],[1,"text-gray-600"],[1,"rounded-xl","border","p-4","hover:shadow","transition","cursor-pointer",3,"click"],[1,"flex","items-center","justify-between"],[1,"text-lg","font-semibold"],[1,"text-xs","px-2","py-1","rounded-full"],[1,"text-sm","text-gray-500"],[1,"mt-2","line-clamp-3"],["class","mt-3 flex gap-2",4,"ngIf"],[1,"mt-3","flex","gap-2"],[1,"px-2","py-1","text-sm","rounded","border",3,"click"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"div",1)(2,"h1",2),t.EFF(3,"News & Blog"),t.k0s(),t.j41(4,"div",3)(5,"input",4),t.mxI("ngModelChange",function(u){return t.DH7(n.query,u)||(n.query=u),u}),t.bIt("ngModelChange",function(){return n.refresh()}),t.k0s(),t.j41(6,"button",5),t.bIt("click",function(){return n.clearSearch()}),t.EFF(7,"Clear"),t.k0s(),t.DNE(8,x,2,0,"button",6),t.k0s()(),t.DNE(9,v,2,0,"div",7),t.j41(10,"div",8),t.DNE(11,y,12,10,"article",9),t.k0s()()),2&o&&(t.R7$(5),t.R50("ngModel",n.query),t.R7$(3),t.Y8G("ngIf",n.auth.isAdmin()),t.R7$(),t.Y8G("ngIf",!n.posts.length),t.R7$(2),t.Y8G("ngForOf",n.posts))},dependencies:[p.Sq,p.bT,s.me,s.BC,s.vS,p.vh]})}}return i})();const j=()=>[];function C(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.k0s()),2&i){const e=t.XpG().ngIf;t.R7$(),t.SpI("By ",e.author,"")}}function B(i,r){if(1&i&&(t.qex(0),t.EFF(1),t.bVm()),2&i){const e=t.XpG().ngIf;t.R7$(),t.SpI(" \u2022 Tags: ",(e.tags||t.lJ4(1,j)).join(", ")," ")}}function E(i,r){if(1&i&&(t.j41(0,"span"),t.EFF(1),t.nI1(2,"date"),t.k0s()),2&i){const e=t.XpG().ngIf;t.R7$(),t.SpI(" \u2022 Updated: ",t.i5U(2,1,e.updatedAt,"medium"),"")}}function I(i,r){if(1&i){const e=t.RV6();t.j41(0,"div",1)(1,"div",2)(2,"h1",3),t.EFF(3),t.k0s(),t.j41(4,"div",4)(5,"button",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.edit())}),t.EFF(6,"Edit"),t.k0s(),t.j41(7,"button",5),t.bIt("click",function(){t.eBV(e);const n=t.XpG();return t.Njj(n.delete())}),t.EFF(8,"Delete"),t.k0s()()(),t.j41(9,"p",6),t.EFF(10),t.nI1(11,"date"),t.k0s(),t.j41(12,"div",7),t.EFF(13),t.k0s(),t.j41(14,"div",8),t.DNE(15,C,2,1,"span",9)(16,B,2,2,"ng-container",9)(17,E,3,4,"span",9),t.k0s()()}if(2&i){const e=r.ngIf;t.R7$(3),t.JRh(e.title),t.R7$(7),t.JRh(t.i5U(11,6,e.publishedAt,"medium")),t.R7$(3),t.SpI(" ",e.body," "),t.R7$(2),t.Y8G("ngIf",e.author),t.R7$(),t.Y8G("ngIf",e.tags&&e.tags.length),t.R7$(),t.Y8G("ngIf",e.updatedAt)}}let R=(()=>{class i{constructor(e,o,n){this.route=e,this.router=o,this.blog=n}ngOnInit(){const e=this.route.snapshot.paramMap.get("slug");this.post=this.blog.getBySlug(e),this.post||this.router.navigate(["/blog"])}edit(){this.post&&this.router.navigate(["/blog",this.post.slug,"edit"])}delete(){this.post&&confirm("Delete this post?")&&(this.blog.delete(this.post.slug),this.router.navigate(["/blog"]))}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(c.nX),t.rXU(c.Ix),t.rXU(d.c))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-blog-detail"]],decls:1,vars:1,consts:[["class","mx-auto max-w-3xl p-4 sm:p-6",4,"ngIf"],[1,"mx-auto","max-w-3xl","p-4","sm:p-6"],[1,"flex","items-center","justify-between","gap-3"],[1,"text-3xl","font-bold"],[1,"flex","gap-2"],[1,"px-3","py-2","rounded-lg","border",3,"click"],[1,"text-gray-500"],[1,"prose","prose-neutral","max-w-none","mt-6","whitespace-pre-wrap"],[1,"mt-6","text-sm","text-gray-600"],[4,"ngIf"]],template:function(o,n){1&o&&t.DNE(0,I,18,9,"div",0),2&o&&t.Y8G("ngIf",n.post)},dependencies:[p.bT,p.vh]})}}return i})();function w(i,r){1&i&&(t.j41(0,"div",17),t.EFF(1," Title is required (min 3 chars). "),t.k0s())}function T(i,r){1&i&&(t.j41(0,"div",17),t.EFF(1," Body is required (min 5 chars). "),t.k0s())}let m=(()=>{class i{constructor(e,o,n,l){this.fb=e,this.route=o,this.router=n,this.blog=l,this.isEdit=!1,this.form=this.fb.group({title:["",[s.k0.required,s.k0.minLength(3)]],slug:[""],author:[""],tags:[""],body:["",[s.k0.required,s.k0.minLength(5)]],published:[!0]})}ngOnInit(){const e=this.route.snapshot.paramMap.get("slug");if(e){const o=this.blog.getBySlug(e);o&&(this.isEdit=!0,this.originalSlug=o.slug,this.form.patchValue({title:o.title,slug:o.slug,author:o.author||"",tags:(o.tags||[]).join(", "),body:o.body,published:o.published}))}}save(){if(this.form.invalid)return void this.form.markAllAsTouched();const e=this.form.getRawValue(),o={title:e.title.trim(),slug:(e.slug||"").trim(),author:(e.author||"").trim(),tags:(e.tags||"").split(",").map(n=>n.trim()).filter(Boolean),body:e.body,published:!!e.published};if(this.isEdit&&this.originalSlug){const n=this.blog.update(this.originalSlug,o);n&&this.router.navigate(["/blog",n.slug])}else{const n=this.blog.create(o);this.router.navigate(["/blog",n.slug])}}cancel(){this.router.navigate(this.isEdit&&this.originalSlug?["/blog",this.originalSlug]:["/blog"])}static{this.\u0275fac=function(o){return new(o||i)(t.rXU(s.ok),t.rXU(c.nX),t.rXU(c.Ix),t.rXU(d.c))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-blog-editor"]],decls:36,vars:4,consts:[[1,"mx-auto","max-w-3xl","p-4","sm:p-6"],[1,"text-2xl","font-semibold","mb-4"],[1,"space-y-4",3,"ngSubmit","formGroup"],[1,"block","text-sm","font-medium","mb-1"],["type","text","formControlName","title",1,"w-full","border","rounded-lg","px-3","py-2"],["class","text-sm text-red-600",4,"ngIf"],["type","text","formControlName","slug","placeholder","auto-generated from title if blank",1,"w-full","border","rounded-lg","px-3","py-2"],[1,"grid","sm:grid-cols-2","gap-4"],["type","text","formControlName","author",1,"w-full","border","rounded-lg","px-3","py-2"],["type","text","formControlName","tags","placeholder","e.g. union, update",1,"w-full","border","rounded-lg","px-3","py-2"],["formControlName","body",1,"w-full","border","rounded-lg","px-3","py-2","h-56"],[1,"flex","items-center","gap-2"],["id","published","type","checkbox","formControlName","published",1,"h-4","w-4"],["for","published",1,"text-sm"],[1,"flex","gap-2","pt-2"],["type","submit",1,"px-4","py-2","rounded","bg-black","text-white"],["type","button",1,"px-4","py-2","rounded","border",3,"click"],[1,"text-sm","text-red-600"]],template:function(o,n){1&o&&(t.j41(0,"div",0)(1,"h1",1),t.EFF(2),t.k0s(),t.j41(3,"form",2),t.bIt("ngSubmit",function(){return n.save()}),t.j41(4,"div")(5,"label",3),t.EFF(6,"Title"),t.k0s(),t.nrm(7,"input",4),t.DNE(8,w,2,0,"div",5),t.k0s(),t.j41(9,"div")(10,"label",3),t.EFF(11,"Slug (optional)"),t.k0s(),t.nrm(12,"input",6),t.k0s(),t.j41(13,"div",7)(14,"div")(15,"label",3),t.EFF(16,"Author"),t.k0s(),t.nrm(17,"input",8),t.k0s(),t.j41(18,"div")(19,"label",3),t.EFF(20,"Tags (comma-separated)"),t.k0s(),t.nrm(21,"input",9),t.k0s()(),t.j41(22,"div")(23,"label",3),t.EFF(24,"Body"),t.k0s(),t.nrm(25,"textarea",10),t.DNE(26,T,2,0,"div",5),t.k0s(),t.j41(27,"div",11),t.nrm(28,"input",12),t.j41(29,"label",13),t.EFF(30,"Published"),t.k0s()(),t.j41(31,"div",14)(32,"button",15),t.EFF(33,"Save"),t.k0s(),t.j41(34,"button",16),t.bIt("click",function(){return n.cancel()}),t.EFF(35,"Cancel"),t.k0s()()()()),2&o&&(t.R7$(2),t.JRh(n.isEdit?"Edit Post":"New Post"),t.R7$(),t.Y8G("formGroup",n.form),t.R7$(5),t.Y8G("ngIf",n.form.controls.title.touched&&n.form.controls.title.invalid),t.R7$(18),t.Y8G("ngIf",n.form.controls.body.touched&&n.form.controls.body.invalid))},dependencies:[p.bT,s.qT,s.me,s.Zm,s.BC,s.cb,s.j4,s.JD]})}}return i})();var h=a(4978),f=a(400);const G=[{path:"",component:b,children:[{path:"",component:F},{path:"new",component:m,canActivate:[h.q,f.K],data:{roles:["Admin"]}},{path:":id/edit",component:m,canActivate:[h.q,f.K],data:{roles:["Admin"]}},{path:":id",component:R}]}];let $=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[c.iI.forChild(G),c.iI]})}}return i})(),D=(()=>{class i{static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[p.MD,s.YN,s.X1,c.iI,$]})}}return i})()}}]);